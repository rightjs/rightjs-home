# Единообразная обработка опций

RightJS имеет свой собственный способ для единообразной работы с опциями, который
работает для всех конфигурируемых классов, таких как {Xhr}, {Fx}, {Cookie} и всех
модулей из проектов [Goods](/goods) и [UI](/ui).

Для этой цели существует совместно используемый модуль под именем {Options}.
Все классы RightJS используют его, и вы можете делать тоже самое.

## Соглашение, :convention

Модуль {Options} может быть использован несколькими различными способами, и для
того чтобы организовать все классы к единому формату, мы используем следующее соглашение.

Каждый конфигурируемый класс имеет свойство уровня класса с именем `Options`,
которое представляет собой обычный хэш, содержащий настройки по умолчанию.

Например класс {Xhr} имеет свойство `Options` выглядящее примерно вот так

    Xhr.Options = {
      method:   'post',
      encoding: 'utf-8',
      ....
    }

Когда вы создаете объект конфигурируемого класса, опции которые вы посылаете в конструктор
будут _объединены_ с опциями по умолчанию и установлены в переменную уровня объекта `options`
(в нижнем регистре), которая будет содержать текущие настройки объекта.

    // с опциями по умолчанию
    var xhr = new Xhr();
    xhr.options.method   // -> 'post'
    xhr.options.encoding // -> 'utf-8'

    // с пользовательскими опциями
    var xhr = new Xhr({method: 'get'});
    xhr.options.method   // -> 'get'
    xhr.options.encoding // -> 'utf-8'


## Настройки, :alterations

Наличие подобного соглашения, дает вам хорошую гибкость при настройке приложений.

Когда вы видите список поддерживаемых опций для класса, скажем [опции для виджета календаря](/ui/calendar#options),
во-первых вы можете рассчитывать на поддержку этих опций конструктором класса

    var calendar = new Calendar({
      format:  'EUR',
      firstDay: 1
    });
    
    calendar.options.format   // -> 'EUR'
    calendar.options.firstDay // -> 1

А так же на то, что вы можете изменить объект `Calendar.Options` и изменить базовое поведение
всех объектов данного класса в одном месте

    $ext(Calendar.Options, {
      format:  'EUR',
      firstDay: 1
    });
    
    // после этого
    var calendar = new Calendar();
    calendar.options.format   // -> 'EUR'
    calendar.options.firstDay // -> 1

Данный принцип работает со всеми конфигурируемыми классами по всему фреймворку.


## Опции виджетов RigthJS UI, :ui

Большинство виджетов из библиотеки [RightJS UI](/ui) могут быть инициализированы без написания
непосредственно JavaScript кода. Все из них имеют собственные маркеры в виде специальных
значений в атрибуте `rel` или специальных css-классов, так что когда страница будет загружена,
скрипты могли автоматически найти нужные элементы и инициализировать их. Например вы можете
назначить виджет календаря для поля ввода таким образом

    <input type="text" rel="calendar" />

Но в случае если вам необходимо указать какие либо специальные настройки для каждого отдельного
виджета, в RightJS существует стандартный способ.

Все что вам нужно, это создать специальный атрибут в стиле HTML5, который будет иметь имя в виде
`data-[имя-класса]-options` и содержать внутри необходимые опции в формате JSON. Например:

    // поле с календарем
    <input rel="calendar" data-calendar-options="{format:'EUR'}" />
    
    // поле с автоподстановками
    <input type="text" rel="autocompleter"
      data-autocompleter-options="{url:'/my/url'}">
      
    // ссылка на лайтбокс
    <a rel="lightbox" data-lightbox-options="{blockContent: true}">
      <img src="/.../..." />
    </a>

Когда скрипт будет обрабатывать ваши элементы, он автоматически проверит наличие таких атрибутов
и если они имеются, будет использовать их в качестве источника опций.

Данный принцип работает со всеми автоматически инициализируемыми классами из библиотек [UI](/ui) и [Goods](/goods)
