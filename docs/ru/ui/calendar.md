# Календарь

`Calendar` - это стандартный виджет календаря для RightJS

<%= partial '/ui/head', :locals => {:name => 'calendar'} %>

<%= anchors_index %>


## Список возможностей, :features

Виджет календаря имеет следующие возможности:

* Выбор даты и времени для полей ввода
* Поддержка таблиц из нескольких месяцев
* Поддержка минимальных/максимальных дат
* Может работать как независимый виджет
* Авто-инициализация через `rel="calendar"` атрибут
* Маленький (всего 10k) размер 
* Никаких зависимых файлов css или картинок
* Поддержка интернационализации


## Основы использования, :usage

Использование этого виджета очень простое. Просто подключите файл обычным образом

    <script src="/javascripts/right-calendar.js"></script>

И после этого вы сможете создавать ваши календари с помощью класса `Calendar`

    new Calendar({format: 'EUR'}).insertTo('that-element');
    
    new Calendar({showTime: true}).assignTo('that-input');



## Авто-инициализация, :discovery

Для виджета календаря доступна стандартная для RightJS возможность автоматической
инициализации. Все что для этого требуется, это указать атрибут `rel="calendar"` на
нужном поле ввода. После этого, когда страница загрузится, скрипт автоматически
найдет это поле и создаст для него календарик.

    <input type="text" rel="calendar" />

Вы так же можете использовать атрибут `rel="calendar[input_field_id]"`, если
вы хотите чтобы календарь появлялся только по клику на специальном элементе.

    <input type="text" id="my-input" />
    <img src="calendar.png" rel="calendar[my-input]" />

И дополнительно, вы можете использовать атрибуты в стиле HTML5 для указания
специфических опций, как в следующем примере

    <input type="text" rel="calendar" 
      data-calendar-options="{format: 'EUR'}" />


## Список опций, :options

Существует следующий список опций которые вы можете использовать с виджетами календаря

Название       | Умолчание  | Описание
---------------|------------|-------------------------------------------------------------------
format         | 'ISO'      | шаблон даты или имя предустановленного формата
showTime       | null       | флаг, если виджет должен показывать поля выбора времени
twentyFourHour | null       | флаг, какой формат времени должен использоваться 12 или 24 часовой
timePeriod     | 1          | минимальный квант времени, в минутах
showButtons    | false      | флаг, если виджет должен показывать снизу кнопки
minDate        | null       | минимальная дата которую можно выбрать
maxDate        | null       | максимальная дата которую можно выбрать
listYears      | false      | флаг, если виджет должен показывать кнопки для листания годов
firstDay       | 1          | с какого дня начинается неделя `1` c понедельника, `0` с воскресенья
numberOfMonths | 1          | число месяцев на календаре, или размер сетки \[x,y\]
fxName         | 'fade'     | имя визуального эффекта или `null` чтобы отключить
fxDuration     | 'short'    | длительность визуального эффекта
relName        | 'calendar' | ключ для функции авто-инициализации
checkTags      | '\*'       | какие тэги нужно просматривать (чтобы ускорить поиск)

Вы можете использовать любые из перечисленных опций совместно с каждым отдельно взятым виджетом
или же изменить настройки глобально в переменной `Calendar.Options`.

Опции `showTime` и `twentyFourHour` имеют значение `null` по умолчанию. Это означает, что
скрипт будет определять их автоматически по строке шаблона даты. Но вы так же можете указать их в
какое-либо значение вручную.


## Форматы дат, :formatting

Виджет календаря использует систему формата дат
[GNU strftime](http://www.gnu.org/software/libc/manual/html%5Fnode/Formatting-Calendar-Time.html#index-strftime-2660)
и поддерживает следующие ключи:

Имя | Описание
----|------------------------------------------------------------------------
%a  | Короткое название дня недели ('Вск')
%A  | Полное название дня недели ('Воскресенье')
%b  | Короткое название месяца ('Янв')
%B  | Полное название месяца ('Январь')
%d  | День месяца (01..31)
%e  | День месяца без начального нуля (1..31)
%m  | Номер месяца в году (01..12)
%y  | Год без века (00..99)
%Y  | Полный номер года
%H  | Час дня в 24-х часовом формате (00..23)
%k  | Час дня в 24-х часовом формате без начального нуля (0..23)
%I  | Час дня в 12-ти часовом формате (01..12)
%l  | Час дня в 12-ти часовом формате без начального нуля (0..12)
%p  | Индикатор меридиана ('AM'  or  'PM')
%P  | Индикатор меридиана ('pm'  or  'pm')
%M  | Минуты (00..59)
%S  | Секунды (00..59)
%%  | Символ '%'

Так же доступно несколько предустановленных стандартных форматов:


Имя   | Формат     | Пример
------|------------|--------------------
ISO   | '%Y-%m-%d' | 2009-08-18
POSIX | '%Y/%m/%d' | 2009/08/18
EUR   | '%d-%m-%Y' | 18-08-2009
US    | '%m/%d/%Y' | 08/18/2009


## Список событий, :events

Календари поддерживают следующий список событий

Имя    | Описание
-------|-------------------------------------------------
show   | календарь был показан
hide   | календарь был скрыт
select | пользователь выбирает дату/время
done   | пользователь нажимает кнопку "Готово"

Вы можете использовать все стандартные методы модуля {Observer} для работы с данными
событиями. Сокращенные методы вроде `onSelect`, `onDone` так же доступны.


## API Документация, :api

Виджет календаря имеет простой API интерфейс

Метод                       | Описание
----------------------------|----------------------------------------------------------------------
setDate(date)               | устанавливает дату, это может быть объект даты или строка
getDate()                   | возвращает текущую дату в виде объекта даты
format(\[String format\])   | возвращает текущую дату в виде строки
insertTo(element)           | вставляет элемент календаря в указанный элемент
assignTo(element\[,trigger\]) | назначает календарь работать с указанным полем ввода. можно так же указать элемент по клику на котором календарь будет показываться/скрываться
hide()                      | скрывает элемент календаря
show()                      | показывает элемент календаря
showAt(Element)             | показывает элемент календаря ниже указанного элемента и назначает его на совместную с ним работу



## Интернационализация, :i18n

Вы можете найти модуль интернационализации для нужного вам языка в github репозитории

<http://github.com/rightjs/rightjs-ui/tree/master/i18n/>

Или же вы можете произвести перевод вручную, изменив объект `Calendar.i18n` следующим образом

    Calendar.i18n = {
      Done:            'Готово',        
      Now:             'Сейчас',        
      Next:            'Следующий месяц',
      Prev:            'Предыдущий месяц',
      NextYear:        'Следующий год', 
      PrevYear:        'Предыдущий год',
  
      dayNames:        $w('Вокскресенье Понедельник Вторник Среда Четверг Пятница Суббота'),
      dayNamesShort:   $w('Вск Пнд Втр Срд Чтв Птн Сбт'),
      dayNamesMin:     $w('Вс Пн Вт Ср Чт Пт Сб'),
      monthNames:      $w('Январь Февраль Март Аперль Май Инюнь Июль Август Сентябрь Октябрь Ноябрь Декабрь'),
      monthNamesShort: $w('Янв Фев Мар Апр Май Инь Иль Авг Сен Окт Ноя Дек')
    };


## Настройки стилей, :styles

Если вам необходимо настроить виджет календаря для того чтобы он больше подходил к
вашему дизайну, вы можете использовать следующее описание структуры элементов, как
руководство к действию.

    <div class="right-calendar">
      <div class="right-ui-button right-calendar-next-button">&lsaquo;</div>
      <div class="right-ui-button right-calendar-prev-button">&rsaquo;</div>

      <table class="right-calendar-greed">
        <tr><td>

          <div class="right-calendar-month">
            <div class="right-calendar-month-caption"></div>
        
            <table>
              <thead>
                <tr>
                  <th>Mo<th>Tu<th>...
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="right-calendar-day-blank">
                  <td class="right-calendar-day-selected">
                  <td class="right-calendar-day-disabled">
                  <td><td><td><td>...
                </tr>
                .....
              </tbody>
            </table>
          </div>

        </td></tr>
      </table>

      <div class="right-calendar-time">
        <select></select> : <select></select>
      </div>

      <div class="right-ui-buttons right-calendar-buttons">
        <input type="button" value="Done" class="right-ui-button right-calendar-done-button" />
        <input type="button" value="Now" class="right-ui-button right-calendar-now-button" />
      </div>
    </div>
