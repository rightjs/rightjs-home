#  Автокомплитер

`Autocompleter` - это стандартынй виджет автоподстановок для RightJS

<%= partial '/ui/head', :locals => {:name => 'autocompleter'} %>

<%= anchors_index %>


## Список возможностей, :features

`Autocompleter` имеет следующие возможности:

* Работает как с удаленными вызовами, так и с локальными списками
* Дружелюбен к RESTful дизайну и дает удобно кэшировать результаты поиска
* Имеет внутренний кэш запросов
* Поставляется в одном маленьком файле (меньше 4k)
* Не имеет зависимых файлов css или картинок
* Имеет базовый стиль уже встроенным в код
* Использует простой текстовый спиннер по умолчанию
* Поддерживает автмоматическую инициализацию полей


## Основы использования, :usage

В целом для данного виджета не существует какого-либо API, и все что вам
нужно это вызвать конструктор указав ссылку на поле ввода и опции

    // <input type="text" id="my-input" />

    // с запросами на сервер
    new Autocompleter('my-input', {
      url: '/my/things'
    });

    // с использованием локального списка
    new Autocompleter('my-input', {
      local: $w('mommy daddy sonny doggy kitty')
    });
    
Когда вы используете запросы на сервер, данный скрипт ожидает от него 
обычный список в виде простых `UL/LI` тэгов

    <ul>
      <li>one</li>
      <li>two</li>
      <li>three</li>
    </ul>

Естественно вы можете использовать все что вам заблагорассудится внутри
каждого элемента списка. Включая дополнительные скрипты
    

## Авто-инициализация, :discovery

Как и большинство других виджетов в RightJS UI, модуль автоподстановок
поддерживает автоматическую инициализацию. Все что вам для этого нужно,
это указать атрибут `'rel'` в следующем виде

    <input type="text" rel="autocompleter[/your/url/goes/here]" />

Или в случае локального списка, использовать следующий формат

    <input type="text" rel="autocompleter['mommy','daddy','sonny']"/>

Вы так же можете использовать атрибуты в стиле HTML5 для опций

    <input type="text" rel="autocompleter[/url]"
      data-autocompleter-options="{spinner: 'spinner'}"/>

Когда страница загрузится, скрипт автоматически найдет эти поля по маркерам
и инциализирует все должным образом.


## Список опций, :options

Существует следующий список опций которые вы можете использовать с виджетом
автоподстановок. Вы можете как указывать их любым доступным способом с каждым
отдельным виджетом, так и изменить настройки глобально в объекте `Autocompleter.Options`.

Название   | Умолчание         | Описание
-----------|-------------------|--------------------------------------------------------
url        | document.location | адрес для запросов, может содержать плейсхолдер '%{search}'
param      | 'search'          | имя параметра для отправки на сервер
method     | 'get'             | метод для запросов
minLength  | 1                 | минимальная длинна с которой начинает срабатывать поиск
threshold  | 200               | длительность паузы между нажатиями клавиш
cache      | true              | флаг указывающий на необходимость использования кэша
local      | null              | локальный список поиска
fxName     | 'slide'           | имя визуального эффекта, 'null' чтобы отключить
fxDuration | 'short'           | длительно визуального эффекта
spinner    | 'native'          | ссылка на элемент спиннера
relName    | 'autocompleter'   | ключ для авто-инициализации


## Список событий, :events

Вы так же можете использовать следующий список событий для работы с полями автоподстановок

Имя    | Описание
-------|----------------------------------------------------------
show   | когда список подсказок появляется
hide   | когда список подсказок скрывается
update | когда список подсказок был обновлен
load   | когда запрос на сервер был закончен
select | когда какой-либо вариант в списке был отмечен
done   | когда какой-либо вариант был выбран и вставлен в поле ввода


## Использование url адресов, :url

Данный скрипт подстановок может работать с url-адресами в двух форматах. В стандартном
виде вы можете, как обычно указать опции адреса и имени параметра `'url'`, `'param'`

    new Autocompleter('my-input', {
      url:   '/my/url',
      param: 'search'
    });

    /*
      в этом случае скрипт будет опрашивать адреса в виде
 
      /my/url?param=a
      /my/url?param=as
      /my/url?param=asd
      /my/url?param=asdf
  
    */

Но вы так же можете использовать более дружелюбные для кэширования адреса, с
помощью плейсхолдера `'%{search}'` в строке адреса, как в следующем примере

    new Autocompleter('my-input', {
      url: '/my/url/%{search}.js'
    });

    /*
      в этом случае скрипт будет запрашивать адреса в виде
  
      /my/url/a.js
      /my/url/as.js
      /my/url/asd.js
      /my/url/asdf.js
  
    */

Это позволяет сбрасывать результаты запросов напрямую в обычные файлы на сервере,
создавая очень эффективный кэш запросов.


## Настройки стилей, :styles

Если вам необходимо изменить какие-либо стили, можете использовать следующее
описание структуры HTML, как руководство.

    <div class="autocompleter">
      <ul>
        <li>boo</li>
        <li>boo</li>
        <li>boo</li>
      </ul>
    </div>
    <div class="autocompleter-spinner">
      <div class="dot-1">&raquo;</div>
      <div class="dot-2">&raquo;</div>
      <div class="dot-3">&raquo;</div>
    </div>





