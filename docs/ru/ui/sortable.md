# Сортируемые списки

`Sortable` - стандартный виджет сортируемых списков для RightJS

<%= partial '/ui/head', :locals => {:name => 'sortable'} %>

__ВНИМАНИЕ:__ данный виджет требует модуль [drag-n-drop](/goods/drag-n-drop)


<%= anchors_index %>


## Список возможностей, :features

Сортируемые списки обладают следующими возможностями:

* Дружелюбен к RESTful дизайну
* Автоматическое распознавание направления списка
* Поддержка автоматической инициализации
* Очень маленький размер (меньше 2k)


## Базовое использование, :usage

Существует несколько способов создания сортируемых списков. Во-первых вы можете
использовать класс `Sortable` напрямую из вашего JavaScript кода

    new Sortable('todos', { url: '/todos' });

Во-вторых вы можете использовать сокращенный метод уровня {Element}  `'makeSortable'`

    $('todos').makeSortable({ url: '/todos' });

Вы так же можете отменить изменения вызвав метод `'undoSortable()'` элемента
или метод `'destroy'` объекта типа `Sortable`.

    new Sortable('todos', { url: '/todos' }).destroy();

    $('todos').makeSortable({ url: '/todos' }).undoSortable();


## Авто-инициализация, :discovery

Другой способ создания сортируемых списков, это авто-инициализация с использованием
тэга `rel` и опций в HTML5 стиле

    // простой список
    <ul rel="sortable">
      <li>Item 1</li>
      <li>Item 2</li>
    </ul>


    // удаленный список
    <ul rel="sortable" data-sortable-options="{url: '/todos'}">
      <li id="item_1">Покормить рыбку</li>
      <li id="item_2">Позвонить маме</li>
    </ul>


## Список опций, :options

Вы так же можете использовать следующий список опций
  
Имя       | Умолчание  | Описание
----------|------------|---------------------------------------------------------------------
direction | 'auto'     | направление 'auto', 'vertical', 'horizontal', 'x', 'y'
tags      | 'li'       | имя тэга элементов списка
url       | null       | url-адрес для отправки изменений на сервер, может содержать плейсхолдер '%{id}'
method    | 'put'      | метод для {Xhr} запросов
Xhr       | {}         | дополнительные {Xhr} опции
idParam   | 'id'       | имя параметра для ID элемента
posParam  | 'position' | имя параметра для позиции элемента
parseId   | true       | флаг, если необходимо выделить номер из ID элемента перед отправкой
relName   | 'sortable' | ключ для функции авто-инициализации


## Список событий, :events

Данный виджет поддерживает только одно событие: `'update'`. Слушатели будут получать два
аргумента, ссылку на элемент списка и индекс новой позиции в списке.

    new Sortable('todos', {
      onUpdate: function(element, position) {
        // ....
      }
    });


## Url-адреса и обработка вызовов, :remote

В обычном варианте использования, все просто. Есть набор стандартных опций, как то `url`, `method`
и т.п. вы просто указываете их и при каждом изменении в списке, скрипт автоматически отсылает
результаты на сервер.
    
    new Sortable('boo', {
      url: '/the/url/address'
    });

Дополнительно вы можете использовать в url-адресах плейсхолдер `'%{id}'`, для создания более
дружелюбных для RESTful дизайна адресов.

    new Sortable('boo', {
      url: 'todos/%{id}.js'
    });

В данном случае скрипт будет автоматически считывать атрибуты ID передвигаемых элементов,
опционально выделять из них целочисленный номер и отправлять результаты на адреса подобные
следующим

    /todos/1.js
    /todos/2.js
    .....
